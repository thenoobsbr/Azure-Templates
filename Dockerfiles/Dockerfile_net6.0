FROM mcr.microsoft.com/dotnet/aspnet:6.0-alpine
WORKDIR /app

COPY . .

RUN apt-get install -y tzdata

CORECLR_ENABLE_PROFILING=1
CORECLR_PROFILER={36032161-FFC0-4B61-B559-F6C5D41BAE5A}
CORECLR_PROFILER_PATH=APP_DEPLOYMENT_DIRECTORY/newrelic/libNewRelicProfiler.so
CORECLR_NEWRELIC_HOME=APP_DEPLOYMENT_DIRECTORY/newrelic
ENV ASPNETCORE_ENVIRONMENT=Production
ENTRYPOINT ["dotnet", "#{DLL_NAME}#"]